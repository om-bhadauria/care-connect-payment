{% extends "base.html" %}

{% block title %}My Profile - CareConnect{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto mt-6 bg-white rounded-xl shadow-2xl overflow-hidden">
    <!-- Header Section (Banner/Cover Image) -->
    <div class="h-32 bg-teal-600 relative">
        <div class="absolute inset-0 bg-gradient-to-r from-blue-500 to-teal-600 opacity-90"></div>
        <div class="absolute bottom-4 right-6">
            <button onclick="showMessage('Profile picture updated', 'info')" class="bg-white text-primary px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-100 transition">
                <i data-lucide="camera" class="w-4 h-4 mr-1 inline"></i>
                Change Cover
            </button>
        </div>
    </div>

    <!-- Profile Content -->
    <div class="px-6 pb-8">
        <!-- Avatar Section -->
        <div class="flex flex-col items-center sm:items-start -mt-16">
            <div class="relative">
                <div class="w-28 h-28 object-cover rounded-full border-4 border-white shadow-lg bg-blue-100 text-primary flex items-center justify-center text-4xl font-bold">
                    {{ current_user.name[:2].upper() }}
                </div>
                <button onclick="showMessage('Profile picture updated', 'info')" class="absolute bottom-2 right-2 bg-primary text-white p-1.5 rounded-full hover:bg-blue-800 transition">
                    <i data-lucide="camera" class="w-3 h-3"></i>
                </button>
            </div>
            
            <div class="text-center sm:text-left mt-4">
                <h1 class="text-3xl font-extrabold text-gray-900">{{ current_user.name }}</h1>
                <p class="text-lg text-teal-600 font-medium mt-1">
                    {{ 'Medical Practitioner' if current_user.role == 'doctor' else 'Patient Profile' }}
                </p>
                <span class="inline-block mt-2 px-3 py-1 text-sm font-semibold text-white {{ 'bg-success' if current_user.role == 'doctor' else 'bg-teal-600' }} rounded-full flex items-center">
                    <i data-lucide="shield-check" class="w-4 h-4 mr-1"></i>
                    {{ 'Specialist (' + current_user.specialty + ')' if current_user.role == 'doctor' and current_user.specialty else 'Verified Account' }}
                </span>
            </div>
        </div>

        <!-- Personal Information Section -->
        <div class="mt-8 pt-6 border-t border-gray-100 grid grid-cols-1 md:grid-cols-2 gap-8">
            <div>
                <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                    <i data-lucide="info" class="w-5 h-5 mr-2 text-primary"></i>
                    Contact Details
                </h2>
                <dl class="space-y-3 text-gray-700">
                    <div class="flex">
                        <dt class="w-28 font-medium text-gray-500">Email:</dt>
                        <dd class="flex-1">{{ current_user.email }}</dd>
                    </div>
                    {% if current_user.phone %}
                    <div class="flex">
                        <dt class="w-28 font-medium text-gray-500">Phone:</dt>
                        <dd class="flex-1">{{ current_user.phone }}</dd>
                    </div>
                    {% endif %}
                    {% if current_user.location %}
                    <div class="flex">
                        <dt class="w-28 font-medium text-gray-500">Location:</dt>
                        <dd class="flex-1">{{ current_user.location }}</dd>
                    </div>
                    {% endif %}
                    {% if current_user.role != 'doctor' %}
                    <div class="flex">
                        <dt class="w-28 font-medium text-gray-500">Member Since:</dt>
                        <dd class="flex-1">{{ current_user.created_at.strftime('%B %d, %Y') if current_user.created_at else 'Recently joined' }}</dd>
                    </div>
                    {% else %}
                    <div class="flex">
                        <dt class="w-28 font-medium text-gray-500">License ID:</dt>
                        <dd class="flex-1">IND-90210-MD</dd>
                    </div>
                    {% endif %}
                </dl>
            </div>

            <!-- Health/Professional Summary Section -->
            <div>
                <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                    <i data-lucide="clipboard-list" class="w-5 h-5 mr-2 text-primary"></i>
                    {{ 'Professional Summary' if current_user.role == 'doctor' else 'Medical Summary' }}
                </h2>
                <dl class="space-y-3 text-gray-700">
                    {% if current_user.role == 'doctor' %}
                        {% if current_user.specialty %}
                        <div class="flex">
                            <dt class="w-28 font-medium text-gray-500">Specialty:</dt>
                            <dd class="flex-1 font-bold text-primary">{{ current_user.specialty }}</dd>
                        </div>
                        {% endif %}
                        <div class="flex">
                            <dt class="w-28 font-medium text-gray-500">Experience:</dt>
                            <dd class="flex-1">12 Years</dd>
                        </div>
                        <div class="flex">
                            <dt class="w-28 font-medium text-gray-500">Hospital:</dt>
                            <dd class="flex-1">Care Connect Multi-Specialty</dd>
                        </div>
                    {% else %}
                        <div class="flex">
                            <dt class="w-28 font-medium text-gray-500">Blood Type:</dt>
                            <dd class="flex-1 font-bold text-red-600">O+</dd>
                        </div>
                        <div class="flex">
                            <dt class="w-28 font-medium text-gray-500">Allergies:</dt>
                            <dd class="flex-1">Pollen, Penicillin (Simulated)</dd>
                        </div>
                        <div class="flex">
                            <dt class="w-28 font-medium text-gray-500">Conditions:</dt>
                            <dd class="flex-1">Mild Asthma (Simulated)</dd>
                        </div>
                    {% endif %}
                    <div class="flex">
                        <dt class="w-28 font-medium text-gray-500">Primary Care:</dt>
                        <dd class="flex-1">Dr. S. Sharma</dd>
                    </div>
                </dl>
                <button class="mt-4 px-4 py-2 bg-primary text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition" onclick="showMessage('{{ 'Opening profile editor...' if current_user.role == 'doctor' else 'Opening medical history editor...' }}', 'info');">
                    Edit {{ 'Professional Info' if current_user.role == 'doctor' else 'Health Record' }}
                </button>
            </div>
        </div>

        <!-- Settings and Actions -->
        <div class="mt-8 pt-6 border-t border-gray-100">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 flex items-center">
                <i data-lucide="settings" class="w-5 h-5 mr-2 text-primary"></i>
                Account Settings
            </h2>
            <div class="space-y-4">
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition duration-150 cursor-pointer" onclick="showMessage('Password change initiated...', 'info');">
                    <span class="font-medium text-gray-800">Change Password</span>
                    <i data-lucide="chevron-right" class="w-5 h-5 text-gray-500"></i>
                </div>
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition duration-150 cursor-pointer" onclick="showMessage('Notifications settings loaded...', 'info');">
                    <span class="font-medium text-gray-800">Notification Preferences</span>
                    <i data-lucide="chevron-right" class="w-5 h-5 text-gray-500"></i>
                </div>
                <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition duration-150 cursor-pointer" onclick="showMessage('Privacy settings loaded...', 'info');">
                    <span class="font-medium text-gray-800">Privacy Settings</span>
                    <i data-lucide="chevron-right" class="w-5 h-5 text-gray-500"></i>
                </div>
                <a href="{{ url_for('logout') }}" class="block w-full py-3 bg-red-100 text-red-600 font-bold rounded-lg hover:bg-red-200 transition text-center">
                    <i data-lucide="log-out" class="w-5 h-5 inline-block mr-2"></i>
                    Sign Out of CareConnect
                </a>
            </div>
        </div>

    </div>
</div>
{% endblock %}